<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Flores com Cartão Romântico</title>
    <meta
      name="description"
      content="Monte um presente com flores e um cartão romântico em escrita à mão e gere um link perfeito para compartilhar nas redes sociais."
    />

    <!-- Tailwind CSS via CDN (modo browser) -->
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>

    <!-- Fontes de escrita à mão -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;600&family=Pacifico&family=Shadows+Into+Light&family=Indie+Flower&display=swap"
      rel="stylesheet"
    />

    <style>
      .hand-dancing {
        font-family: "Dancing Script", system-ui, -apple-system, BlinkMacSystemFont,
          "Segoe UI", sans-serif;
      }
      .hand-pacifico {
        font-family: "Pacifico", system-ui, -apple-system, BlinkMacSystemFont,
          "Segoe UI", sans-serif;
      }
      .hand-shadows {
        font-family: "Shadows Into Light", system-ui, -apple-system,
          BlinkMacSystemFont, "Segoe UI", sans-serif;
      }
      .hand-indie {
        font-family: "Indie Flower", system-ui, -apple-system,
          BlinkMacSystemFont, "Segoe UI", sans-serif;
      }
      .no-scrollbar::-webkit-scrollbar {
        display: none;
      }
      .no-scrollbar {
        -ms-overflow-style: none;
        scrollbar-width: none;
      }
    </style>
  </head>
  <body
    class="min-h-screen bg-gradient-to-br from-rose-50 via-pink-50 to-rose-100 text-slate-800"
  >
    <div class="min-h-screen flex flex-col">
      <!-- Cabeçalho -->
      <header
        class="border-b border-rose-100 bg-white/70 backdrop-blur sticky top-0 z-20"
      >
        <div
          class="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between gap-4"
        >
          <div class="flex items-center gap-3">
            <div
              class="w-9 h-9 rounded-2xl bg-gradient-to-tr from-rose-500 via-rose-400 to-pink-400 flex items-center justify-center shadow-sm"
            >
              <span class="text-white text-xl font-semibold">F</span>
            </div>
            <div>
              <p class="text-sm font-semibold text-slate-800">
                Flores com Cartão
              </p>
              <p class="text-xs text-rose-400">
                Presentes românticos em um link compartilhável
              </p>
            </div>
          </div>
          <div class="hidden sm:flex items-center gap-3 text-xs text-slate-500">
            <div class="flex items-center gap-1">
              <span class="w-1.5 h-1.5 rounded-full bg-emerald-400"></span>
              <span>Pronto para compartilhar em redes sociais</span>
            </div>
          </div>
        </div>
      </header>

      <!-- Conteúdo principal -->
      <main class="flex-1">
        <section class="max-w-6xl mx-auto px-4 py-8 md:py-12">
          <div
            class="grid lg:grid-cols-[minmax(0,3fr)_minmax(0,2fr)] gap-8 lg:gap-10 items-start"
          >
            <!-- Coluna esquerda: vitrine + cartão -->
            <div class="space-y-8">
              <!-- Hero -->
              <section class="space-y-4">
                <div class="inline-flex items-center gap-2 text-xs mb-1">
                  <span
                    class="px-2.5 py-1 rounded-full border border-rose-200 bg-rose-50/80 text-rose-500 font-medium"
                    >Romântico & delicado</span
                  >
                  <span class="text-slate-400 hidden sm:inline">
                    Flores reais, mensagem em escrita à mão e um link para você
                    enviar para quem ama.
                  </span>
                </div>
                <h1
                  class="text-3xl md:text-4xl font-semibold tracking-tight text-slate-900"
                >
                  Monte um presente com
                  <span class="text-rose-500">flores e cartão</span> em poucos
                  cliques
                </h1>
                <p class="text-sm md:text-base text-slate-600 max-w-2xl">
                  Escolha flores e buquês super românticos (valores simbólicos
                  entre <span class="font-semibold">R$ 5,00 e R$ 10,00</span>),
                  escreva uma mensagem em fonte de escrita à mão e gere um
                  <span class="font-semibold">link perfeito</span> para enviar
                  pelo WhatsApp, Instagram, Facebook e muito mais.
                </p>
                <div
                  class="flex flex-wrap gap-3 text-[11px] text-slate-500 border border-rose-100 bg-white/70 rounded-2xl px-4 py-2.5"
                >
                  <div class="flex items-center gap-2">
                    <span
                      class="w-6 h-6 rounded-full bg-rose-100 flex items-center justify-center text-[11px] font-semibold text-rose-500"
                      >1</span
                    >
                    <span>Escolha flores e buquês românticos</span>
                  </div>
                  <div class="flex items-center gap-2">
                    <span
                      class="w-6 h-6 rounded-full bg-rose-100 flex items-center justify-center text-[11px] font-semibold text-rose-500"
                      >2</span
                    >
                    <span>Escreva o cartão com uma fonte delicada</span>
                  </div>
                  <div class="flex items-center gap-2">
                    <span
                      class="w-6 h-6 rounded-full bg-rose-100 flex items-center justify-center text-[11px] font-semibold text-rose-500"
                      >3</span
                    >
                    <span>Gere o link e envie nas redes sociais</span>
                  </div>
                </div>
              </section>

              <!-- Vitrine de flores e buquês -->
              <section class="space-y-4">
                <div
                  class="flex flex-col sm:flex-row sm:items-end justify-between gap-2"
                >
                  <div>
                    <h2
                      class="text-lg md:text-xl font-semibold text-slate-900 flex items-center gap-2"
                    >
                      Flores e buquês românticos
                    </h2>
                    <p class="text-xs text-slate-500">
                      Clique em um arranjo para adicioná-lo ao seu presente.
                      Todos os valores ficam entre
                      <span class="font-medium">R$ 5,00 e R$ 10,00</span> por
                      item.
                    </p>
                  </div>
                  <p class="text-[11px] text-slate-400">
                    Imagens meramente ilustrativas, focadas em texturas e cores
                    realistas.
                  </p>
                </div>

                <div
                  class="grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-4"
                >
                  <!-- Produto 1 -->
                  <button
                    type="button"
                    class="group text-left bg-white/90 rounded-3xl shadow-sm hover:shadow-xl border border-rose-100 overflow-hidden flex flex-col h-full transition-all duration-200"
                    data-product-id="rose-classico"
                    data-product-name="Bouquê Clássico de Rosas Vermelhas"
                    data-product-price="9.5"
                    data-product-type="buque"
                    aria-label="Adicionar Bouquê Clássico de Rosas Vermelhas"
                  >
                    <div class="aspect-[4/3] overflow-hidden">
                      <img
                        src="https://images.pexels.com/photos/931166/pexels-photo-931166.jpeg?auto=compress&cs=tinysrgb&w=800"
                        alt="Bouquê de rosas vermelhas realistas em tom profundo"
                        class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"
                        loading="lazy"
                      />
                    </div>
                    <div class="p-4 space-y-1.5">
                      <p
                        class="text-[11px] font-semibold uppercase tracking-[0.18em] text-rose-400"
                      >
                        Buquê romântico
                      </p>
                      <h3 class="font-semibold text-slate-900 text-sm">
                        Bouquê Clássico de Rosas Vermelhas
                      </h3>
                      <p class="text-xs text-slate-500">
                        Rosas aveludadas, laço de cetim e folhagens suaves para
                        uma declaração de amor intensa.
                      </p>
                      <div
                        class="flex items-center justify-between pt-1 text-sm"
                      >
                        <span class="font-semibold text-rose-500"
                          >R$ 9,50</span
                        >
                        <span
                          class="text-[11px] text-rose-400 group-hover:text-rose-500"
                          >Clique para adicionar</span
                        >
                      </div>
                    </div>
                  </button>

                  <!-- Produto 2 -->
                  <button
                    type="button"
                    class="group text-left bg-white/90 rounded-3xl shadow-sm hover:shadow-xl border border-rose-100 overflow-hidden flex flex-col h-full transition-all duration-200"
                    data-product-id="rosa-unica"
                    data-product-name="Rosa Única com Caule Longo"
                    data-product-price="5.0"
                    data-product-type="flor"
                    aria-label="Adicionar Rosa Única com Caule Longo"
                  >
                    <div class="aspect-[4/3] overflow-hidden">
                      <img
                        src="https://images.pexels.com/photos/56866/garden-rose-red-pink-56866.jpeg?auto=compress&cs=tinysrgb&w=800"
                        alt="Rosa vermelha realista com caule longo"
                        class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"
                        loading="lazy"
                      />
                    </div>
                    <div class="p-4 space-y-1.5">
                      <p
                        class="text-[11px] font-semibold uppercase tracking-[0.18em] text-rose-400"
                      >
                        Gesto delicado
                      </p>
                      <h3 class="font-semibold text-slate-900 text-sm">
                        Rosa Única com Caule Longo
                      </h3>
                      <p class="text-xs text-slate-500">
                        Um clássico minimalista: uma rosa perfeita, pronta para
                        acompanhar uma mensagem inesquecível.
                      </p>
                      <div
                        class="flex items-center justify-between pt-1 text-sm"
                      >
                        <span class="font-semibold text-rose-500"
                          >R$ 5,00</span
                        >
                        <span
                          class="text-[11px] text-rose-400 group-hover:text-rose-500"
                          >Clique para adicionar</span
                        >
                      </div>
                    </div>
                  </button>

                  <!-- Produto 3 -->
                  <button
                    type="button"
                    class="group text-left bg-white/90 rounded-3xl shadow-sm hover:shadow-xl border border-rose-100 overflow-hidden flex flex-col h-full transition-all duration-200"
                    data-product-id="tulipas-rosadas"
                    data-product-name="Tulipas Cor-de-Rosa Suaves"
                    data-product-price="8.9"
                    data-product-type="buque"
                    aria-label="Adicionar Tulipas Cor-de-Rosa Suaves"
                  >
                    <div class="aspect-[4/3] overflow-hidden">
                      <img
                        src="https://images.pexels.com/photos/2067633/pexels-photo-2067633.jpeg?auto=compress&cs=tinysrgb&w=800"
                        alt="Buquê de tulipas cor-de-rosa em close realista"
                        class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"
                        loading="lazy"
                      />
                    </div>
                    <div class="p-4 space-y-1.5">
                      <p
                        class="text-[11px] font-semibold uppercase tracking-[0.18em] text-rose-400"
                      >
                        Doce e delicado
                      </p>
                      <h3 class="font-semibold text-slate-900 text-sm">
                        Tulipas Cor-de-Rosa Suaves
                      </h3>
                      <p class="text-xs text-slate-500">
                        Tulipas em tom blush, perfeitas para um amor leve,
                        gentil e cheio de carinho.
                      </p>
                      <div
                        class="flex items-center justify-between pt-1 text-sm"
                      >
                        <span class="font-semibold text-rose-500"
                          >R$ 8,90</span
                        >
                        <span
                          class="text-[11px] text-rose-400 group-hover:text-rose-500"
                          >Clique para adicionar</span
                        >
                      </div>
                    </div>
                  </button>

                  <!-- Produto 4 -->
                  <button
                    type="button"
                    class="group text-left bg-white/90 rounded-3xl shadow-sm hover:shadow-xl border border-rose-100 overflow-hidden flex flex-col h-full transition-all duration-200"
                    data-product-id="campo-margaridas"
                    data-product-name="Margaridas do Campo"
                    data-product-price="5.9"
                    data-product-type="buque"
                    aria-label="Adicionar Margaridas do Campo"
                  >
                    <div class="aspect-[4/3] overflow-hidden">
                      <img
                        src="https://images.pexels.com/photos/36764/marguerite-daisy-beautiful-beauty.jpg?auto=compress&cs=tinysrgb&w=800"
                        alt="Margaridas brancas e amarelas em campo iluminado"
                        class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"
                        loading="lazy"
                      />
                    </div>
                    <div class="p-4 space-y-1.5">
                      <p
                        class="text-[11px] font-semibold uppercase tracking-[0.18em] text-rose-400"
                      >
                        Amor leve
                      </p>
                      <h3 class="font-semibold text-slate-900 text-sm">
                        Margaridas do Campo
                      </h3>
                      <p class="text-xs text-slate-500">
                        Buquê cheio de luz, com flores brancas e miolos
                        dourados, perfeito para mensagens espontâneas.
                      </p>
                      <div
                        class="flex items-center justify-between pt-1 text-sm"
                      >
                        <span class="font-semibold text-rose-500"
                          >R$ 5,90</span
                        >
                        <span
                          class="text-[11px] text-rose-400 group-hover:text-rose-500"
                          >Clique para adicionar</span
                        >
                      </div>
                    </div>
                  </button>

                  <!-- Produto 5 -->
                  <button
                    type="button"
                    class="group text-left bg-white/90 rounded-3xl shadow-sm hover:shadow-xl border border-rose-100 overflow-hidden flex flex-col h-full transition-all duration-200"
                    data-product-id="lavandas-mini"
                    data-product-name="Mini Buquê de Lavandas"
                    data-product-price="6.5"
                    data-product-type="buque"
                    aria-label="Adicionar Mini Buquê de Lavandas"
                  >
                    <div class="aspect-[4/3] overflow-hidden">
                      <img
                        src="https://images.pexels.com/photos/931162/pexels-photo-931162.jpeg?auto=compress&cs=tinysrgb&w=800"
                        alt="Mini buquê de lavandas roxas em foco realista"
                        class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"
                        loading="lazy"
                      />
                    </div>
                    <div class="p-4 space-y-1.5">
                      <p
                        class="text-[11px] font-semibold uppercase tracking-[0.18em] text-rose-400"
                      >
                        Calmaria e afeto
                      </p>
                      <h3 class="font-semibold text-slate-900 text-sm">
                        Mini Buquê de Lavandas
                      </h3>
                      <p class="text-xs text-slate-500">
                        Pequeno, perfumado e cheio de charme, ideal para um
                        gesto romântico discreto.
                      </p>
                      <div
                        class="flex items-center justify-between pt-1 text-sm"
                      >
                        <span class="font-semibold text-rose-500"
                          >R$ 6,50</span
                        >
                        <span
                          class="text-[11px] text-rose-400 group-hover:text-rose-500"
                          >Clique para adicionar</span
                        >
                      </div>
                    </div>
                  </button>

                  <!-- Produto 6 -->
                  <button
                    type="button"
                    class="group text-left bg-white/90 rounded-3xl shadow-sm hover:shadow-xl border border-rose-100 overflow-hidden flex flex-col h-full transition-all duration-200"
                    data-product-id="rose-champagne"
                    data-product-name="Bouquê Rosé & Champagne"
                    data-product-price="10.0"
                    data-product-type="buque"
                    aria-label="Adicionar Bouquê Rosé & Champagne"
                  >
                    <div class="aspect-[4/3] overflow-hidden">
                      <img
                        src="https://images.pexels.com/photos/1028725/pexels-photo-1028725.jpeg?auto=compress&cs=tinysrgb&w=800"
                        alt="Bouquê de rosas vermelhas exuberantes em close realista"
                        class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"
                        loading="lazy"
                      />
                    </div>
                    <div class="p-4 space-y-1.5">
                      <p
                        class="text-[11px] font-semibold uppercase tracking-[0.18em] text-rose-400"
                      >
                        Sofisticação
                      </p>
                      <h3 class="font-semibold text-slate-900 text-sm">
                        Bouquê Rosé & Champagne
                      </h3>
                      <p class="text-xs text-slate-500">
                        Tons pastel, pétalas cheias de textura e acabamento
                        elegante para ocasiões marcantes.
                      </p>
                      <div
                        class="flex items-center justify-between pt-1 text-sm"
                      >
                        <span class="font-semibold text-rose-500"
                          >R$ 10,00</span
                        >
                        <span
                          class="text-[11px] text-rose-400 group-hover:text-rose-500"
                          >Clique para adicionar</span
                        >
                      </div>
                    </div>
                  </button>
                </div>
              </section>

              <!-- Cartão & fontes de escrita à mão -->
              <section class="space-y-4">
                <div
                  class="flex flex-col sm:flex-row sm:items-end justify-between gap-2"
                >
                  <div>
                    <h2
                      class="text-lg md:text-xl font-semibold text-slate-900 flex items-center gap-2"
                    >
                      Mensagem no cartão
                    </h2>
                    <p class="text-xs text-slate-500 max-w-xl">
                      Escreva uma mensagem especial e escolha uma fonte de
                      escrita à mão para deixar tudo mais íntimo e romântico.
                    </p>
                  </div>
                  <p class="text-[11px] text-slate-400">
                    Todas as fontes foram pensadas para lembrar cartas
                    escritas à mão.
                  </p>
                </div>

                <div
                  class="bg-white/90 rounded-3xl shadow-lg border border-rose-100 p-5 md:p-6 space-y-4"
                >
                  <div class="grid md:grid-cols-2 gap-5">
                    <!-- Configuração de fonte e texto -->
                    <div class="space-y-4">
                      <div class="space-y-2">
                        <p class="text-xs font-medium text-slate-600">
                          Escolha a fonte da sua mensagem
                        </p>
                        <div class="grid grid-cols-2 gap-2 text-sm">
                          <button
                            type="button"
                            class="font-medium px-3 py-2 rounded-full border border-rose-300 bg-rose-50 text-rose-600 hand-dancing text-sm"
                            data-font="hand-dancing"
                          >
                            Romântico suave
                          </button>
                          <button
                            type="button"
                            class="font-medium px-3 py-2 rounded-full border border-rose-100 bg-white text-slate-700 hand-pacifico text-sm"
                            data-font="hand-pacifico"
                          >
                            Bem apaixonado
                          </button>
                          <button
                            type="button"
                            class="font-medium px-3 py-2 rounded-full border border-rose-100 bg-white text-slate-700 hand-shadows text-sm"
                            data-font="hand-shadows"
                          >
                            Carta discreta
                          </button>
                          <button
                            type="button"
                            class="font-medium px-3 py-2 rounded-full border border-rose-100 bg-white text-slate-700 hand-indie text-sm"
                            data-font="hand-indie"
                          >
                            Jeito espontâneo
                          </button>
                        </div>
                      </div>

                      <div class="space-y-2">
                        <label
                          for="message-input"
                          class="text-xs font-medium text-slate-600"
                          >Escreva a mensagem</label
                        >
                        <textarea
                          id="message-input"
                          maxlength="280"
                          class="w-full min-h-[130px] resize-none rounded-2xl border border-rose-100 bg-rose-50/60 px-3 py-2 text-sm text-slate-700 focus:outline-none focus:ring-2 focus:ring-rose-300 focus:border-rose-300 placeholder:text-slate-400"
                          placeholder="Ex.: Desde que você chegou, tudo ficou mais leve e colorido. Obrigado por ser meu pedaço favorito do dia."
                        ></textarea>
                        <div class="flex justify-between text-[11px]">
                          <span class="text-slate-400"
                            >Máx. 280 caracteres</span
                          >
                          <span
                            id="char-count"
                            class="text-slate-400"
                            aria-live="polite"
                            >0</span
                          >
                        </div>
                      </div>
                    </div>

                    <!-- Pré-visualização do cartão -->
                    <div class="space-y-3">
                      <p
                        class="text-xs font-medium uppercase tracking-[0.2em] text-rose-400"
                      >
                        Pré-visualização do cartão
                      </p>
                      <div
                        class="bg-rose-50 border border-rose-100 rounded-2xl p-3 h-full flex items-stretch"
                      >
                        <div
                          class="bg-white rounded-xl border border-rose-100 shadow-inner px-4 py-3 w-full flex flex-col justify-between min-h-[160px]"
                        >
                          <div>
                            <p
                              class="text-[11px] uppercase tracking-[0.28em] text-rose-300"
                            >
                              Para alguém muito especial
                            </p>
                            <p
                              id="message-preview"
                              class="mt-3 text-lg text-slate-700 hand-dancing leading-relaxed break-words whitespace-pre-wrap"
                            >
                              Clique para escrever uma mensagem cheia de amor,
                              do jeitinho que você diria pessoalmente.
                            </p>
                          </div>

                          <div
                            id="music-preview"
                            class="mt-3 text-[11px] text-slate-500 flex items-center justify-between border-t border-dashed border-rose-100 pt-2"
                            hidden
                          >
                            <span>Música especial adicionada ao presente</span>
                            <a
                              id="music-preview-link"
                              href="#"
                              target="_blank"
                              rel="noopener noreferrer"
                              class="text-rose-500 font-medium underline"
                              >Abrir música</a
                            >
                          </div>

                          <p
                            class="mt-4 text-[11px] text-right text-slate-400"
                          >
                            Ass:
                            <span id="signature-preview">Seu amor secreto</span>
                          </p>
                        </div>
                      </div>

                      <div class="space-y-2">
                        <label
                          for="signature-input"
                          class="text-xs font-medium text-slate-600"
                          >Assinatura (opcional)</label
                        >
                        <input
                          id="signature-input"
                          type="text"
                          maxlength="60"
                          class="w-full rounded-full border border-rose-100 bg-white px-3 py-2 text-sm text-slate-700 focus:outline-none focus:ring-2 focus:ring-rose-300 focus:border-rose-300 placeholder:text-slate-400"
                          placeholder="Coloque seu nome ou apelido carinhoso"
                        />
                      </div>
                    </div>
                  </div>

                  <!-- Extra: imagem da galeria -->
                  <div
                    class="mt-3 border-t border-dashed border-rose-100 pt-4 space-y-3"
                  >
                    <div class="flex flex-wrap items-center justify-between">
                      <div class="space-y-0.5">
                        <p
                          class="text-xs font-medium uppercase tracking-[0.18em] text-rose-400"
                        >
                          Extra opcional
                        </p>
                        <p class="text-sm font-semibold text-slate-800">
                          Adicionar imagem da galeria
                        </p>
                        <p class="text-xs text-slate-500 max-w-md">
                          Inclua uma imagem romântica super realista para
                          acompanhar o cartão. Cada imagem da galeria custa
                          <span class="font-semibold">R$ 2,00</span> a mais
                          no presente.
                        </p>
                      </div>
                      <div class="text-right mt-2 sm:mt-0">
                        <p class="text-xs text-slate-400">Adicional único</p>
                        <p class="text-sm font-semibold text-rose-500">
                          + R$ 2,00
                        </p>
                        <label
                          class="inline-flex items-center gap-2 mt-2 text-xs text-slate-600 cursor-pointer"
                        >
                          <input
                            id="gallery-toggle"
                            type="checkbox"
                            class="w-4 h-4 rounded border-rose-300 text-rose-500 focus:ring-rose-400"
                          />
                          <span>Incluir imagem da galeria</span>
                        </label>
                      </div>
                    </div>

                    <div
                      class="grid grid-cols-3 gap-2 text-[11px] text-slate-500"
                    >
                      <div
                        class="aspect-[4/3] rounded-xl overflow-hidden border border-rose-100 bg-rose-50"
                      >
                        <div
                          class="w-full h-full bg-cover bg-center"
                          style="background-image: url('https://images.pexels.com/photos/1231265/pexels-photo-1231265.jpeg?auto=compress&cs=tinysrgb&w=800');"
                        ></div>
                      </div>
                      <div
                        class="aspect-[4/3] rounded-xl overflow-hidden border border-rose-100 bg-rose-50"
                      >
                        <div
                          class="w-full h-full bg-cover bg-center"
                          style="background-image: url('https://images.pexels.com/photos/931167/pexels-photo-931167.jpeg?auto=compress&cs=tinysrgb&w=800');"
                        ></div>
                      </div>
                      <div
                        class="aspect-[4/3] rounded-xl overflow-hidden border border-rose-100 bg-rose-50 flex items-center justify-center px-2 text-center"
                      >
                        <span>
                          Exemplos de imagens românticas em alta resolução para
                          acompanhar o seu link.
                        </span>
                      </div>
                    </div>
                  </div>

                  <!-- Música opcional -->
                  <div
                    class="mt-3 border-t border-dashed border-rose-100 pt-4 space-y-3"
                  >
                    <div
                      class="flex flex-wrap items-center justify-between gap-2"
                    >
                      <div class="space-y-0.5">
                        <p
                          class="text-xs font-medium uppercase tracking-[0.18em] text-rose-400"
                        >
                          Música opcional
                        </p>
                        <p class="text-sm font-semibold text-slate-800">
                          Adicionar link de música
                        </p>
                        <p class="text-xs text-slate-500 max-w-md">
                          Cole um link de uma música do Spotify ou do YouTube
                          para acompanhar seu presente. O link será salvo junto
                          com o cartão.
                        </p>
                      </div>
                    </div>
                    <div>
                      <label
                        for="music-input"
                        class="text-xs font-medium text-slate-600"
                        >Link da música (Spotify ou YouTube)</label
                      >
                      <input
                        id="music-input"
                        type="url"
                        inputmode="url"
                        class="mt-1 w-full rounded-full border border-rose-100 bg-white px-3 py-2 text-sm text-slate-700 focus:outline-none focus:ring-2 focus:ring-rose-300 focus:border-rose-300 placeholder:text-slate-400"
                        placeholder="Ex.: https://open.spotify.com/... ou https://www.youtube.com/watch?v=..."
                      />
                      <p class="mt-1 text-[11px] text-slate-400">
                        Quem receber o link poderá abrir essa música junto com o
                        cartão.
                      </p>
                    </div>
                  </div>
                </div>
              </section>

              <!-- Como funciona -->
              <section class="space-y-3">
                <h2 class="text-sm font-semibold text-slate-800">
                  Como usar este link de flores com cartão
                </h2>
                <div
                  class="grid md:grid-cols-3 gap-3 text-[11px] text-slate-500"
                >
                  <div
                    class="bg-white/80 border border-rose-100 rounded-2xl px-3 py-3"
                  >
                    <p class="font-semibold text-slate-800 mb-1 text-sm">
                      1. Monte o presente
                    </p>
                    <p>
                      Combine flores, buquês, mensagem e, se quiser, uma imagem
                      da galeria por R$ 2,00.
                    </p>
                  </div>
                  <div
                    class="bg-white/80 border border-rose-100 rounded-2xl px-3 py-3"
                  >
                    <p class="font-semibold text-slate-800 mb-1 text-sm">
                      2. Gere o link
                    </p>
                    <p>
                      Clique em "Gerar link para compartilhar" e copie o link
                      criado automaticamente.
                    </p>
                  </div>
                  <div
                    class="bg-white/80 border border-rose-100 rounded-2xl px-3 py-3"
                  >
                    <p class="font-semibold text-slate-800 mb-1 text-sm">
                      3. Envie nas redes sociais
                    </p>
                    <p>
                      Cole o link em conversas no WhatsApp, direct do
                      Instagram, Facebook ou qualquer outra rede.
                    </p>
                  </div>
                </div>
              </section>
            </div>

            <!-- Coluna direita: resumo & link compartilhável -->
            <aside
              class="bg-white/90 rounded-3xl shadow-xl border border-rose-100 p-5 md:p-6 space-y-5 lg:sticky lg:top-20"
            >
              <section class="space-y-3">
                <div class="flex items-start justify-between gap-2">
                  <div>
                    <h2
                      class="text-base md:text-lg font-semibold text-slate-900"
                    >
                      Seu presente romântico
                    </h2>
                    <p class="text-xs text-slate-500">
                      Acompanhe os itens escolhidos, o valor simbólico total e
                      gere o link para compartilhar.
                    </p>
                  </div>
                </div>

                <div
                  id="summary-items"
                  class="space-y-3 max-h-48 overflow-y-auto no-scrollbar text-sm"
                >
                  <p class="text-sm text-slate-400">
                    Nenhuma flor adicionada ainda. Clique em um arranjo para
                    começar.
                  </p>
                </div>

                <div
                  class="border-t border-dashed border-rose-100 pt-3 space-y-1 text-sm"
                >
                  <div class="flex items-center justify-between">
                    <span class="text-slate-600">Flores e buquês</span>
                    <span
                      id="flowers-total"
                      class="font-medium text-slate-800"
                      >R$ 0,00</span
                    >
                  </div>
                  <div class="flex items-center justify-between">
                    <span class="text-slate-500">Imagem da galeria</span>
                    <span
                      id="gallery-total"
                      class="font-medium text-slate-700"
                      >R$ 0,00</span
                    >
                  </div>
                  <div
                    class="flex items-center justify-between pt-1 text-base font-semibold text-slate-900"
                  >
                    <span>Total estimado</span>
                    <span id="grand-total">R$ 0,00</span>
                  </div>
                  <p class="text-[11px] text-slate-400">
                    Valores simbólicos entre R$ 5,00 e R$ 10,00 por item de
                    flor/buquê. Imagem adicional da galeria: R$ 2,00.
                  </p>
                </div>
              </section>

              <section class="space-y-3">
                <div
                  class="space-y-2 border border-rose-100 rounded-2xl p-3 bg-rose-50/70"
                >
                  <p class="text-xs font-semibold text-slate-800">
                    Pagamento via Pix para liberar o link
                  </p>
                  <p class="text-[11px] text-slate-500">
                    Antes de gerar o link do presente, faça o pagamento
                    simbólico para a chave Pix abaixo e marque a confirmação de
                    pagamento.
                  </p>
                  <div class="text-[11px]">
                    <p class="font-medium text-slate-800">Chave Pix (e-mail)</p>
                    <p
                      class="font-mono text-rose-600 text-xs break-all select-all"
                    >
                      sepoloendeu@gmail.com
                    </p>
                  </div>
                  <label
                    class="mt-2 inline-flex items-center gap-2 text-[11px] text-slate-600 cursor-pointer"
                  >
                    <input
                      id="pix-confirm"
                      type="checkbox"
                      class="w-4 h-4 rounded border-rose-300 text-rose-500 focus:ring-rose-400"
                    />
                    <span
                      >Confirmo que realizei o pagamento para a chave Pix
                      acima.</span
                    >
                  </label>
                  <div class="mt-2 space-y-1 text-[11px]">
                    <label for="pix-code" class="font-medium text-slate-700"
                      >Código de liberação</label
                    >
                    <input
                      id="pix-code"
                      type="password"
                      maxlength="12"
                      class="w-full rounded-full border border-rose-200 bg-white px-3 py-2 text-xs text-slate-700 focus:outline-none focus:ring-2 focus:ring-rose-300 focus:border-rose-300 placeholder:text-slate-400"
                      placeholder="Informe o código enviado após o comprovante do Pix"
                    />
                    <p class="text-slate-500">
                      Depois de conferir o comprovante do Pix, o vendedor envia
                      este código. Sem ele o link não é liberado.
                    </p>
                    <p
                      id="pix-code-warning"
                      class="text-rose-500 hidden"
                    >
                      Código de liberação inválido. Verifique com quem recebeu o pagamento.
                    </p>
                  </div>
                  <p
                    id="pix-warning"
                    class="text-[11px] text-rose-500 mt-1 hidden"
                  >
                    Você precisa confirmar o pagamento via Pix para gerar e
                    copiar o link.
                  </p>
                </div>

                <div
                  class="space-y-2 border border-rose-100 rounded-2xl p-3 bg-white/80"
                >
                  <p class="text-xs font-semibold text-slate-800">
                    Conversa sobre o Pix e comprovante
                  </p>
                  <p class="text-[11px] text-slate-500">
                    Depois de fazer o Pix, envie o número de protocolo/ID do comprovante e, se puder, anexe também a imagem/print do comprovante. Vamos receber por e-mail ou no app de mensagens que você escolher e responder por lá.
                  </p>
                  <div class="space-y-2 text-[11px]">
                    <label for="pix-protocol" class="font-medium text-slate-700"
                      >Número de protocolo / ID do Pix</label
                    >
                    <input
                      id="pix-protocol"
                      type="text"
                      maxlength="80"
                      class="w-full rounded-full border border-rose-200 bg-white px-3 py-2 text-xs text-slate-700 focus:outline-none focus:ring-2 focus:ring-rose-300 focus:border-rose-300 placeholder:text-slate-400"
                      placeholder="Cole aqui o número que aparece no comprovante do Pix"
                    />
                  </div>
                  <div class="space-y-2 text-[11px]">
                    <label for="pix-chat-message" class="font-medium text-slate-700"
                      >Mensagem adicional (opcional)</label
                    >
                    <textarea
                      id="pix-chat-message"
                      rows="2"
                      maxlength="240"
                      class="w-full rounded-2xl border border-rose-200 bg-white px-3 py-2 text-xs text-slate-700 focus:outline-none focus:ring-2 focus:ring-rose-300 focus:border-rose-300 placeholder:text-slate-400 resize-none"
                      placeholder="Ex.: Olá, acabei de fazer o Pix e este é o número do meu comprovante."
                    ></textarea>
                  </div>
                  <div class="flex flex-wrap items-center gap-2 text-[11px]">
                    <button
                      id="pix-email-btn"
                      type="button"
                      class="inline-flex items-center justify-center gap-1 rounded-full bg-rose-500 hover:bg-rose-600 text-white font-medium px-3 py-1.5 focus:outline-none focus:ring-2 focus:ring-rose-300"
                    >
                      Enviar por e-mail
                    </button>
                    <button
                      id="pix-copy-msg-btn"
                      type="button"
                      class="inline-flex items-center justify-center gap-1 rounded-full border border-rose-200 bg-white hover:bg-rose-50 text-rose-500 font-medium px-3 py-1.5 focus:outline-none focus:ring-2 focus:ring-rose-300"
                    >
                      Copiar mensagem
                    </button>
                    <p
                      id="pix-chat-feedback"
                      class="text-[11px] text-emerald-500 hidden"
                    >
                      Mensagem copiada. Cole no WhatsApp, Instagram ou onde preferir.
                    </p>
                  </div>
                  <p class="text-[11px] text-slate-400">
                    Este espaço só ajuda a montar a mensagem. Depois de copiar ou enviar por e-mail, lembre-se de anexar o print/imagem do comprovante na conversa.
                  </p>
                </div>

                <button
                  id="share-btn"
                  type="button"
                  class="w-full inline-flex items-center justify-center gap-2 rounded-full bg-rose-500 hover:bg-rose-600 text-white text-sm font-semibold px-4 py-2.5 shadow-sm focus:outline-none focus:ring-2 focus:ring-rose-400 focus:ring-offset-1 focus:ring-offset-rose-50"
                >
                  Gerar link para compartilhar
                </button>

                <div class="space-y-1">
                  <label
                    for="share-link"
                    class="text-xs font-medium text-slate-600"
                    >Link gerado</label
                  >
                  <div class="flex gap-2 items-center">
                    <input
                      id="share-link"
                      type="text"
                      readonly
                      class="flex-1 rounded-full border border-rose-100 bg-rose-50/70 px-3 py-2 text-[11px] text-slate-600 focus:outline-none focus:ring-2 focus:ring-rose-300 focus:border-rose-300"
                      placeholder="O link será gerado aqui."
                    />
                    <button
                      id="copy-btn"
                      type="button"
                      class="px-3 py-2 rounded-full border border-rose-300 bg-white text-xs font-medium text-rose-500 hover:bg-rose-50 focus:outline-none focus:ring-2 focus:ring-rose-300"
                    >
                      Copiar
                    </button>
                  </div>
                  <p
                    id="copy-feedback"
                    class="text-[11px] text-emerald-500"
                    hidden
                  >
                    Link copiado para a área de transferência.
                  </p>
                  <p class="text-[11px] text-slate-400">
                    Cole o link em mensagens no WhatsApp, Instagram, Facebook e
                    outras redes sociais.
                  </p>
                </div>

                <div
                  class="text-[11px] text-slate-400 border-t border-rose-50 pt-3"
                >
                  O link guarda as flores escolhidas, a fonte da mensagem, o
                  texto do cartão e, se você adicionar, o link da música. Este
                  site não verifica o pagamento automaticamente: a confirmação é
                  feita por você após o Pix para a chave informada.
                </div>
              </section>
            </aside>
          </div>
        </section>
      </main>

      <!-- Rodapé simples -->
      <footer
        class="mt-auto border-t border-rose-100 bg-white/70 text-[11px] text-slate-500"
      >
        <div
          class="max-w-6xl mx-auto px-4 py-3 flex flex-col sm:flex-row items-center justify-between gap-2"
        >
          <p>
            Serviço independente para montar presentes com flores e cartões
            românticos enviados por link.
          </p>
          <p class="text-slate-400">
            Dica: salve este link nos favoritos e reaproveite sempre que quiser
            surpreender alguém.
          </p>
        </div>
      </footer>
    </div>

    <script>
      (function () {
        const state = {
          items: {}, // id -> { id, name, price, qty }
          includeGallery: false,
          galleryPrice: 2,
          fontClass: "hand-dancing",
          message: "",
          signature: "",
          musicUrl: "",
        };

        const productButtons = Array.from(
          document.querySelectorAll("[data-product-id]")
        );
        const productButtonsById = new Map();
        productButtons.forEach((btn) => {
          const id = btn.dataset.productId;
          if (id) {
            productButtonsById.set(id, btn);
          }
        });

        const summaryItemsEl = document.getElementById("summary-items");
        const flowersTotalEl = document.getElementById("flowers-total");
        const galleryTotalEl = document.getElementById("gallery-total");
        const grandTotalEl = document.getElementById("grand-total");
        const galleryToggleEl = document.getElementById("gallery-toggle");
        const shareBtnEl = document.getElementById("share-btn");
        const shareLinkEl = document.getElementById("share-link");
        const copyBtnEl = document.getElementById("copy-btn");
        const copyFeedbackEl = document.getElementById("copy-feedback");
        const messageInputEl = document.getElementById("message-input");
        const messagePreviewEl = document.getElementById("message-preview");
        const charCountEl = document.getElementById("char-count");
        const signatureInputEl = document.getElementById("signature-input");
        const signaturePreviewEl = document.getElementById(
          "signature-preview"
        );
        const fontButtons = Array.from(
          document.querySelectorAll("button[data-font]")
        );
        const musicInputEl = document.getElementById("music-input");
        const musicPreviewEl = document.getElementById("music-preview");
        const musicPreviewLinkEl = document.getElementById("music-preview-link");
        const pixConfirmEl = document.getElementById("pix-confirm");
        const pixWarningEl = document.getElementById("pix-warning");
        const pixCodeEl = document.getElementById("pix-code");
        const pixCodeWarningEl = document.getElementById("pix-code-warning");
        const pixProtocolEl = document.getElementById("pix-protocol");
        const pixChatMsgEl = document.getElementById("pix-chat-message");
        const pixEmailBtnEl = document.getElementById("pix-email-btn");
        const pixCopyMsgBtnEl = document.getElementById("pix-copy-msg-btn");
        const pixChatFeedbackEl = document.getElementById("pix-chat-feedback");

        // Código de liberação fixo no front-end.
        // Altere este valor e combine-o com quem irá conferir os pagamentos.
        const PIX_RELEASE_CODE = "GRATIDÃO FLORES COM CARTÃO";

        const FONT_CLASSES = [
          "hand-dancing",
          "hand-pacifico",
          "hand-shadows",
          "hand-indie",
        ];

        function formatCurrency(value) {
          try {
            return value.toLocaleString("pt-BR", {
              style: "currency",
              currency: "BRL",
              minimumFractionDigits: 2,
            });
          } catch (e) {
            return "R$ " + value.toFixed(2).replace(".", ",");
          }
        }

        function updateSummary() {
          const items = Object.values(state.items);

          if (!items.length) {
            summaryItemsEl.innerHTML =
              '<p class="text-sm text-slate-400">Nenhuma flor adicionada ainda. Clique em um arranjo para começar.</p>';
          } else {
            const rows = items
              .map((item) => {
                const lineTotal = item.price * item.qty;
                return (
                  '<div class="flex items-center justify-between gap-2 text-sm">' +
                  '<div class="min-w-0">' +
                  '<p class="font-medium text-slate-800 truncate">' +
                  item.name +
                  "</p>" +
                  '<p class="text-[11px] text-slate-400">Qtd. ' +
                  item.qty +
                  "  b7 " +
                  formatCurrency(item.price) +
                  " cada</p>" +
                  "</div>" +
                  '<div class="flex items-center gap-1 flex-shrink-0">' +
                  '<button type="button" data-action="decrease" data-id="' +
                  item.id +
                  '" class="px-2 py-1 rounded-full border border-rose-200 text-rose-500 text-[11px] hover:bg-rose-50">-</button>' +
                  '<span class="min-w-[1.5rem] text-center text-[11px] text-slate-600">' +
                  item.qty +
                  "</span>" +
                  '<button type="button" data-action="increase" data-id="' +
                  item.id +
                  '" class="px-2 py-1 rounded-full bg-rose-500 text-white text-[11px] hover:bg-rose-600">+</button>' +
                  "</div>" +
                  "</div>" +
                  '<div class="flex justify-end text-[11px] text-slate-500 mb-1">' +
                  "Subtotal: " +
                  formatCurrency(lineTotal) +
                  "</div>"
                );
              })
              .join("");

            summaryItemsEl.innerHTML = rows;
          }

          const flowersTotal = items.reduce(function (sum, item) {
            return sum + item.price * item.qty;
          }, 0);
          const galleryTotal = state.includeGallery ? state.galleryPrice : 0;
          const grandTotal = flowersTotal + galleryTotal;

          flowersTotalEl.textContent = formatCurrency(flowersTotal);
          galleryTotalEl.textContent = formatCurrency(galleryTotal);
          grandTotalEl.textContent = formatCurrency(grandTotal);
        }

        function selectFont(fontClass, updateButtons) {
          if (updateButtons === void 0) updateButtons = true;
          if (!FONT_CLASSES.includes(fontClass)) return;
          state.fontClass = fontClass;

          FONT_CLASSES.forEach(function (cls) {
            messagePreviewEl.classList.remove(cls);
          });
          messagePreviewEl.classList.add(fontClass);

          if (updateButtons) {
            fontButtons.forEach(function (btn) {
              var isActive = btn.dataset.font === fontClass;
              btn.classList.toggle("border-rose-300", isActive);
              btn.classList.toggle("bg-rose-50", isActive);
              btn.classList.toggle("text-rose-600", isActive);
            });
          }
        }

        function updateMusicPreview() {
          if (!musicPreviewEl || !musicPreviewLinkEl) return;
          var url = (state.musicUrl || "").trim();
          if (!url) {
            musicPreviewEl.hidden = true;
            musicPreviewLinkEl.removeAttribute("href");
            return;
          }
          var normalized = url;
          if (!/^https?:\/\//i.test(normalized)) {
            normalized = "https://" + normalized;
          }
          musicPreviewEl.hidden = false;
          musicPreviewLinkEl.href = normalized;
        }

        function buildShareUrl() {
          var url = new URL(window.location.href);
          var params = new URLSearchParams();

          var items = Object.values(state.items);
          if (items.length) {
            var packed = items
              .map(function (item) {
                return item.id + ":" + item.qty;
              })
              .join(",");
            params.set("itens", packed);
          }

          if (state.fontClass) {
            params.set("fonte", state.fontClass);
          }

          if (state.includeGallery) {
            params.set("galeria", "1");
          }

          if (state.message) {
            var msg = state.message.slice(0, 400);
            params.set("msg", msg);
          }

          if (state.signature) {
            var ass = state.signature.slice(0, 60);
            params.set("ass", ass);
          }

          if (state.musicUrl && state.musicUrl.trim()) {
            params.set("musica", state.musicUrl.trim());
          }

          url.search = params.toString();
          return url.toString();
        }

        function loadFromUrl() {
          var params = new URLSearchParams(window.location.search);
          var itensParam = params.get("itens");
          if (itensParam) {
            itensParam.split(",").forEach(function (pair) {
              var parts = pair.split(":");
              if (parts.length !== 2) return;
              var id = parts[0];
              var qtyStr = parts[1];
              var btn = productButtonsById.get(id);
              if (!btn) return;
              var name = btn.dataset.productName || "Item de flor";
              var price = parseFloat(btn.dataset.productPrice || "0");
              var qty = parseInt(qtyStr, 10);
              if (!qty || qty < 1) qty = 1;
              state.items[id] = { id: id, name: name, price: price, qty: qty };
            });
          }

          var fontParam = params.get("fonte");
          if (fontParam && FONT_CLASSES.includes(fontParam)) {
            selectFont(fontParam, true);
          } else {
            selectFont(state.fontClass, true);
          }

          var galeriaParam = params.get("galeria");
          state.includeGallery = galeriaParam === "1";
          if (galleryToggleEl) {
            galleryToggleEl.checked = state.includeGallery;
          }

          var msgParam = params.get("msg");
          if (msgParam && messageInputEl) {
            state.message = msgParam.slice(0, 280);
            messageInputEl.value = state.message;
            messagePreviewEl.textContent = state.message;
          }

          var assParam = params.get("ass");
          if (assParam && signatureInputEl) {
            state.signature = assParam.slice(0, 60);
            signatureInputEl.value = state.signature;
            signaturePreviewEl.textContent = state.signature;
          }

          var musicaParam = params.get("musica");
          if (musicaParam && musicInputEl) {
            state.musicUrl = musicaParam;
            musicInputEl.value = musicaParam;
          }

          if (charCountEl && messageInputEl) {
            charCountEl.textContent = String(messageInputEl.value.length);
          }

          updateMusicPreview();
          updateSummary();
        }

        // Eventos de produtos
        productButtons.forEach(function (btn) {
          btn.addEventListener("click", function () {
            var id = btn.dataset.productId;
            var name = btn.dataset.productName || "Item de flor";
            var price = parseFloat(btn.dataset.productPrice || "0");
            if (!id) return;
            if (!state.items[id]) {
              state.items[id] = { id: id, name: name, price: price, qty: 0 };
            }
            state.items[id].qty += 1;
            updateSummary();
          });
        });

        // Aumentar/diminuir quantidade a partir do resumo
        if (summaryItemsEl) {
          summaryItemsEl.addEventListener("click", function (event) {
            var target = event.target;
            if (!(target instanceof HTMLElement)) return;
            var action = target.dataset.action;
            var id = target.dataset.id;
            if (!action || !id || !state.items[id]) return;

            if (action === "increase") {
              state.items[id].qty += 1;
            } else if (action === "decrease") {
              state.items[id].qty -= 1;
              if (state.items[id].qty <= 0) {
                delete state.items[id];
              }
            }
            updateSummary();
          });
        }

        // Fonte da mensagem
        fontButtons.forEach(function (btn) {
          btn.addEventListener("click", function () {
            var fontClass = btn.dataset.font;
            if (!fontClass) return;
            selectFont(fontClass, true);
          });
        });

        // Mensagem do cartão
        if (messageInputEl) {
          messageInputEl.addEventListener("input", function () {
            var value = messageInputEl.value || "";
            if (value.length > 280) {
              value = value.slice(0, 280);
              messageInputEl.value = value;
            }
            state.message = value;
            if (charCountEl) {
              charCountEl.textContent = String(value.length);
            }
            if (value.trim()) {
              messagePreviewEl.textContent = value;
            } else {
              messagePreviewEl.textContent =
                "Clique para escrever uma mensagem cheia de amor, do jeitinho que você diria pessoalmente.";
            }
          });
        }

        // Assinatura
        if (signatureInputEl) {
          signatureInputEl.addEventListener("input", function () {
            var value = signatureInputEl.value || "";
            if (value.length > 60) {
              value = value.slice(0, 60);
              signatureInputEl.value = value;
            }
            state.signature = value;
            if (value.trim()) {
              signaturePreviewEl.textContent = value;
            } else {
              signaturePreviewEl.textContent = "Seu amor secreto";
            }
          });
        }

        // Música
        if (musicInputEl) {
          musicInputEl.addEventListener("input", function () {
            state.musicUrl = musicInputEl.value || "";
            updateMusicPreview();
          });
        }

        // Galeria
        if (galleryToggleEl) {
          galleryToggleEl.addEventListener("change", function () {
            state.includeGallery = !!galleryToggleEl.checked;
            updateSummary();
          });
        }

        function hasPixAuthorization() {
          var confirmed = pixConfirmEl && pixConfirmEl.checked;
          var codeOk = true;
          if (pixCodeEl) {
            var value = (pixCodeEl.value || "").trim();
            codeOk = value === PIX_RELEASE_CODE;
          }

          if (!confirmed) {
            if (pixWarningEl) pixWarningEl.classList.remove("hidden");
          } else if (pixWarningEl) {
            pixWarningEl.classList.add("hidden");
          }

          if (pixCodeEl && pixCodeWarningEl) {
            if (!codeOk && confirmed) {
              pixCodeWarningEl.classList.remove("hidden");
            } else {
              pixCodeWarningEl.classList.add("hidden");
            }
          }

          return confirmed && codeOk;
        }

        function buildPixChatMessage() {
          var protocol = "";
          if (pixProtocolEl) {
            protocol = (pixProtocolEl.value || "").trim();
          }
          var extra = "";
          if (pixChatMsgEl) {
            extra = (pixChatMsgEl.value || "").trim();
          }
          var total = "";
          if (grandTotalEl && grandTotalEl.textContent) {
            total = grandTotalEl.textContent.trim();
          }

          var message =
            "Olá,\n\n" +
            "Acabei de fazer um Pix para o presente de flores com cartão.\n\n" +
            "Número de protocolo / ID do Pix: " +
            (protocol || "(não informado)") +
            "\n";

          if (total) {
            message +=
              "Valor do presente (conforme resumo do site): " + total + "\n";
          }

          message +=
            "\nEstou anexando o comprovante deste Pix (print/imagem) nesta conversa.\n";

          if (extra) {
            message += "\nMensagem adicional: " + extra + "\n";
          }

          message += "\nObrigado(a)!";
          return message;
        }

        if (pixEmailBtnEl) {
          pixEmailBtnEl.addEventListener("click", function () {
            var protocol = pixProtocolEl
              ? (pixProtocolEl.value || "").trim()
              : "";
            if (!protocol) {
              alert(
                "Por favor, informe o número de protocolo / ID do Pix antes de enviar."
              );
              if (pixProtocolEl) {
                pixProtocolEl.focus();
              }
              return;
            }
            var body = buildPixChatMessage();
            var subject = "Confirmação de Pix - Flores com cartão";
            var mailto =
              "mailto:sepoloendeu@gmail.com?subject=" +
              encodeURIComponent(subject) +
              "&body=" +
              encodeURIComponent(body);
            window.location.href = mailto;
          });
        }

        if (pixCopyMsgBtnEl) {
          pixCopyMsgBtnEl.addEventListener("click", function () {
            var protocol = pixProtocolEl
              ? (pixProtocolEl.value || "").trim()
              : "";
            if (!protocol) {
              alert(
                "Por favor, informe o número de protocolo / ID do Pix antes de copiar a mensagem."
              );
              if (pixProtocolEl) {
                pixProtocolEl.focus();
              }
              return;
            }
            var textToCopy = buildPixChatMessage();
            if (!textToCopy) return;

            var showFeedback = function () {
              if (pixChatFeedbackEl) {
                pixChatFeedbackEl.classList.remove("hidden");
                setTimeout(function () {
                  pixChatFeedbackEl.classList.add("hidden");
                }, 2000);
              }
            };

            if (navigator.clipboard && navigator.clipboard.writeText) {
              navigator.clipboard
                .writeText(textToCopy)
                .then(showFeedback)
                .catch(function () {
                  try {
                    var temp = document.createElement("textarea");
                    temp.value = textToCopy;
                    document.body.appendChild(temp);
                    temp.select();
                    document.execCommand("copy");
                    document.body.removeChild(temp);
                    showFeedback();
                  } catch (e) {}
                });
            } else {
              try {
                var temp = document.createElement("textarea");
                temp.value = textToCopy;
                document.body.appendChild(temp);
                temp.select();
                document.execCommand("copy");
                document.body.removeChild(temp);
                showFeedback();
              } catch (e) {}
            }
          });
        }

        // Compartilhamento
        if (shareBtnEl) {
          shareBtnEl.addEventListener("click", function () {
            if (!hasPixAuthorization()) {
              return;
            }

            var url = buildShareUrl();
            if (shareLinkEl) {
              shareLinkEl.value = url;
            }

            if (navigator.share) {
              navigator
                .share({
                  title: "Flores com cartão romântico",
                  text: "Veja o presente com flores e cartão que preparei para você.",
                  url: url,
                })
                .catch(function () {
                  // usuário pode simplesmente cancelar; não fazemos nada
                });
            }
          });
        }

        // Copiar link
        if (copyBtnEl) {
          copyBtnEl.addEventListener("click", function () {
            if (!shareLinkEl || !shareLinkEl.value) {
              // Se ainda não há link gerado, só permite gerar se Pix estiver autorizado
              if (!hasPixAuthorization()) {
                return;
              }
              var url = buildShareUrl();
              shareLinkEl.value = url;
            }

            var textToCopy = shareLinkEl.value;
            if (!textToCopy) return;

            if (navigator.clipboard && navigator.clipboard.writeText) {
              navigator.clipboard
                .writeText(textToCopy)
                .then(function () {
                  if (copyFeedbackEl) {
                    copyFeedbackEl.hidden = false;
                    setTimeout(function () {
                      copyFeedbackEl.hidden = true;
                    }, 2000);
                  }
                })
                .catch(function () {
                  try {
                    shareLinkEl.select();
                    document.execCommand("copy");
                    if (copyFeedbackEl) {
                      copyFeedbackEl.hidden = false;
                      setTimeout(function () {
                        copyFeedbackEl.hidden = true;
                      }, 2000);
                    }
                  } catch (e) {}
                });
            } else {
              try {
                shareLinkEl.select();
                document.execCommand("copy");
                if (copyFeedbackEl) {
                  copyFeedbackEl.hidden = false;
                  setTimeout(function () {
                    copyFeedbackEl.hidden = true;
                  }, 2000);
                }
              } catch (e) {}
            }
          });
        }

        // Inicialização com base na URL
        loadFromUrl();
      })();
    </script>
  </body>
</html>
